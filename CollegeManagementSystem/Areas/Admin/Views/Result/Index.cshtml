@using CMS.CommonHelper
@{
    ViewData["Title"] = "Central College";
    TempData["Title"] = "Result";
}

<div>

    <div class="row mb-4">
        <div class="col-6">
            <h2 class="m-0">Results</h2>
        </div>

        @* <div class="col-6 button-col">
            <a asp-area="Admin" asp-controller="Result" asp-action="Create" class="btn custom-btn">Add</a>
        </div> *@
    </div>

    <div class="row">

        <div class="col-12">

            <table class="table table-bordered" id="ResultTable">

                <thead>
                    <tr>
                        <th>Session Name</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
            </table>

        </div>

    </div>

</div>


@section scripts {

    <script type="text/javascript">

        let ResultTable;

        ResultTable = $('#ResultTable').DataTable({

            "ajax": {
                "url": "/Admin/Result/GetSessions"
            },
            "columns": [

                { "data": "sessionName" },
                {
                    "data": "startTime",
                    "render": function (data) {
                        const date = new Date(data);
                        return date.toLocaleDateString('en-PK');
                    }
                },
                {
                    "data": "endTime",
                    "render": function (data) {
                        const date = new Date(data);
                        return date.toLocaleDateString('en-PK');
                    }
                },
                {
                    "data": "status",
                    "render": function (data) {
                        if (data == '@SessionStatus.UpComing') {
                            return "Up Coming";
                        }
                        return data;
                    }

                },
                {
                    "data": "id",
                    "render": function (data) {
                        return `
                                <a class="btn custom-btn" href="/Admin/Result/Session?Id=${data}">Students</a>
                            `
                    }
                }

            ]


        });


        // function RemoveResult(url) {

        //     Swal.fire({
        //         title: "Are you sure?",
        //         text: "You won't be able to revert this!",
        //         icon: "warning",
        //         showCancelButton: true,
        //         confirmButtonColor: "#3085d6",
        //         cancelButtonColor: "#d33",
        //         confirmButtonText: "Yes, delete it!"
        //     }).then((result) => {
        //         if (result.isConfirmed) {

        //             var xmlHttp = new XMLHttpRequest();


        //             xmlHttp.onreadystatechange = () => {

        //                 if (xmlHttp.readyState == 4 && (xmlHttp.status >= 200 && xmlHttp.status < 400)) {

        //                     var result = JSON.parse(xmlHttp.responseText);

        //                     if (result.result) {
        //                         ResultTable.ajax.reload();
        //                         toastr.success(result.message);
        //                     }
        //                     else {
        //                         toastr.error(message);
        //                     }

        //                 }

        //             }
        //             xmlHttp.open('DELETE', url, true);
        //             xmlHttp.send();

        //         }




        //     });


        // }

    </script>

}